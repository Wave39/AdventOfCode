//
//  Puzzle_2024_20.swift
//  AdventOfCode
//
//  Created by Brian Prescott on 1/3/25.
//  Copyright Â© 2025 Wave 39 LLC. All rights reserved.
//

import Foundation

public class Puzzle_2024_20: PuzzleBaseClass {
    public func solve() {
        let part1 = solvePart1()
        print("Part 1 solution: \(part1)")

        let part2 = solvePart2()
        print("Part 2 solution: \(part2)")
    }

    public func solvePart1() -> Int {
        solvePart1(str: Puzzle_Input.final)
    }

    public func solvePart2() -> Int {
        solvePart2(str: Puzzle_Input.final)
    }

    // https://github.com/rbruinier/AdventOfCode/blob/main/Sources/Solutions/2024/Days/Day20.swift
    
    private func findPath(in grid: CharacterGrid, start: Point2D, end: Point2D) -> [Point2D] {
        var point = start
        var path: [Point2D] = [start]
        var visitedPoints: Set<Point2D> = [start]

        while point != end {
            for direction in CompassDirection.orthogonal {
                let newPoint = point.moved(to: direction)

                if grid.pointIsValid(newPoint) && !visitedPoints.contains(newPoint) && grid.characterAtPoint(newPoint) != "#" {
                    path.append(newPoint)
                    visitedPoints.insert(newPoint)

                    point = newPoint

                    break
                }
            }
        }

        return path
    }

    private func findPossibleCheats(in grid: CharacterGrid, path: [Point2D]) -> [(Point2D, Point2D)] {
        var cheats: [(Point2D, Point2D)] = []

        for i in 0 ..< path.count {
            for j in i + 1 ..< path.count {
                let a = path[i]
                let b = path[j]

                if a.x == b.x, abs(a.y - b.y) == 2 {
                    if a.y < b.y {
                        if grid.characterAtPoint(Point2D(x: a.x, y: a.y + 1)) == "#" {
                            cheats.append((a, b))
                        }
                    } else {
                        if grid.characterAtPoint(Point2D(x: a.x, y: a.y - 1)) == "#" {
                            cheats.append((a, b))
                        }
                    }
                } else if a.y == b.y, abs(a.x - b.x) == 2 {
                    if a.x < b.x {
                        if grid.characterAtPoint(Point2D(x: a.x + 1, y: a.y)) == "#" {
                            cheats.append((a, b))
                        }
                    } else {
                        if grid.characterAtPoint(Point2D(x: a.x - 1, y: a.y)) == "#" {
                            cheats.append((a, b))
                        }
                    }
                }
            }
        }

        return cheats
    }

    private func savingsWithCheat(_ cheat: (Point2D, Point2D), in path: [Point2D]) -> Int? {
            guard
                let indexOfStartPoint = path.firstIndex(where: { $0 == cheat.0 }),
                let indexOfEndPoint = path.firstIndex(where: { $0 == cheat.1 })
            else {
                return nil
            }

            guard indexOfStartPoint < indexOfEndPoint else {
                return nil
            }

            return indexOfEndPoint - indexOfStartPoint - 1
        }

    private func solvePart1(str: String) -> Int {
        let grid = str.parseIntoCharacterMatrix()
        let start = grid.findInstancesOf("S").first!
        let end = grid.findInstancesOf("E").first!
        let path = findPath(in: grid, start: start, end: end)
        let cheats = findPossibleCheats(in: grid, path: path)
        var result = 0

                for cheat in cheats {
                    guard let savings = savingsWithCheat(cheat, in: path) else {
                        continue
                    }

                    if savings >= 100 {
                        result += 1
                    }
                }

                return result
    }

    private func solvePart2(str: String) -> Int {
        let grid = str.parseIntoCharacterMatrix()
        let start = grid.findInstancesOf("S").first!
        let end = grid.findInstancesOf("E").first!
        let path = findPath(in: grid, start: start, end: end)
        var result = 0

        // This is actually easier than part 1 because we don't care about walls so the shortest distance is just the manhattan distance.
        for i in 0 ..< path.count {
            for j in i + 1 ..< path.count {
                let a = path[i]
                let b = path[j]

                let distance = b.manhattanDistanceTo(pt: a)

                let savings = (j - i) - distance

                if distance <= 20, savings >= 100 {
                    result += 1
                }
            }
        }

        return result
    }
}

private class Puzzle_Input: NSObject {
    static let test = """
###############
#...#...#.....#
#.#.#.#.#.###.#
#S#...#.#.#...#
#######.#.#.###
#######.#.#...#
#######.#.###.#
###..E#...#...#
###.#######.###
#...###...#...#
#.#####.#.###.#
#.#...#.#.#...#
#.#.#.#.#.#.###
#...#...#...###
###############
"""

    static let final = """
#############################################################################################################################################
#...#...#.........#...#...#...#...#.......#.........#.....###.........#...#...#...#...#...###.......#.........#.....#...#.....#...#...#...###
#.#.#.#.#.#######.#.#.#.#.#.#.#.#.#.#####.#.#######.#.###.###.#######.#.#.#.#.#.#.#.#.#.#.###.#####.#.#######.#.###.#.#.#.###.#.#.#.#.#.#.###
#.#.#.#.#.......#.#.#...#.#.#.#.#.#.#.....#.......#.#.#...#...#...#...#.#...#...#...#...#...#.#.....#.#...#...#.#...#.#.#...#...#.#.#.#.#...#
#.#.#.#.#######.#.#.#####.#.#.#.#.#.#.###########.#.#.#.###.###.#.#.###.###################.#.#.#####.#.#.#.###.#.###.#.###.#####.#.#.#.###.#
#.#.#.#...###...#.#.....#.#.#...#...#.#...###...#.#...#...#...#.#.#...#.....#.....#...#.....#.#.#...#.#.#...###.#.###.#.....#.....#.#.#.#...#
#.#.#.###.###.###.#####.#.#.#########.#.#.###.#.#.#######.###.#.#.###.#####.#.###.#.#.#.#####.#.#.#.#.#.#######.#.###.#######.#####.#.#.#.###
#.#...#...#...#...###...#...#.........#.#.#...#.#.#.......###.#.#...#.......#...#.#.#.#...#...#...#...#.....#...#...#.......#.#...#.#...#...#
#.#####.###.###.#####.#######.#########.#.#.###.#.#.#########.#.###.###########.#.#.#.###.#.###############.#.#####.#######.#.#.#.#.#######.#
#.#...#...#...#.###...#.....#.###...#...#.#...#.#.#.#.......#...###...#.........#...#.....#.........#.......#...#...#...###.#.#.#.#.#.......#
#.#.#.###.###.#.###.###.###.#.###.#.#.###.###.#.#.#.#.#####.#########.#.###########################.#.#########.#.###.#.###.#.#.#.#.#.#######
#.#.#...#.#...#...#.#...###.#.....#.#.#...#...#.#.#.#...#...#.........#.###.......#...#...#...#...#.#.#...#...#.#.#...#.#...#...#...#.......#
#.#.###.#.#.#####.#.#.#####.#######.#.#.###.###.#.#.###.#.###.#########.###.#####.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.###.#.#################.#
#...#...#.#.....#.#...#...#.....#...#.#.###...#.#.#.#...#...#.....#.....#...#...#.#.#.#.#...#...#...#...#.#.#.#.#...#...#.#.................#
#####.###.#####.#.#####.#.#####.#.###.#.#####.#.#.#.#.#####.#####.#.#####.###.#.#.#.#.#.#################.#.#.#.#####.###.#.#################
#...#...#.......#.....#.#.#...#.#.#...#...#...#...#...#.....#.....#...#...#...#...#.#.#.............#.....#.#.#...#...#...#.#...#...........#
#.#.###.#############.#.#.#.#.#.#.#.#####.#.###########.#####.#######.#.###.#######.#.#############.#.#####.#.###.#.###.###.#.#.#.#########.#
#.#.###.#...........#.#.#.#.#...#.#...#...#...#...#...#.#...#.......#.#.#...#.....#.#...###.....#...#.#...#.#.#...#...#.#...#.#.#.#.........#
#.#.###.#.#########.#.#.#.#.#####.###.#.#####.#.#.#.#.#.#.#.#######.#.#.#.###.###.#.###.###.###.#.###.#.#.#.#.#.#####.#.#.###.#.#.#.#########
#.#.....#.###.......#.#.#.#.#.....#...#.#...#...#...#.#.#.#.#.....#.#.#.#.###...#.#...#.....#...#...#...#.#.#.#...#...#.#.###.#.#.#...#.....#
#.#######.###.#######.#.#.#.#.#####.###.#.#.#########.#.#.#.#.###.#.#.#.#.#####.#.###.#######.#####.#####.#.#.###.#.###.#.###.#.#.###.#.###.#
#.....#...#...#.....#...#...#...#...#...#.#...#.....#.#...#.#...#...#...#...#...#.#...#.......#...#.....#.#.#...#.#.....#...#.#.#.#...#.#...#
#####.#.###.###.###.###########.#.###.###.###.#.###.#.#####.###.###########.#.###.#.###.#######.#.#####.#.#.###.#.#########.#.#.#.#.###.#.###
###...#.###.....###...#.......#.#...#.#...#...#...#.#.....#...#.#.....#.....#...#.#.#...###.....#.....#.#.#.#...#.#.........#.#.#.#.#...#...#
###.###.#############.#.#####.#.###.#.#.###.#####.#.#####.###.#.#.###.#.#######.#.#.#.#####.#########.#.#.#.#.###.#.#########.#.#.#.#.#####.#
#...#...#.....#...#...#...#...#.#...#.#.#...#...#.#.#...#.#...#...#...#.....#...#.#.#.....#.........#...#.#.#.....#.........#.#.#.#...#...#.#
#.###.###.###.#.#.#.#####.#.###.#.###.#.#.###.#.#.#.#.#.#.#.#######.#######.#.###.#.#####.#########.#####.#.###############.#.#.#.#####.#.#.#
#...#.###...#.#.#.#.......#...#.#...#...#...#.#.#.#...#...#.#...#...#...#...#...#.#...#...#...#...#.#...#.#.#...............#.#.#.#.....#...#
###.#.#####.#.#.#.###########.#.###.#######.#.#.#.#########.#.#.#.###.#.#.#####.#.###.#.###.#.#.#.#.#.#.#.#.#.###############.#.#.#.#########
#...#.#.....#...#.###...#...#.#.###.#.....#.#.#.#.#.........#.#.#.#...#...#.....#...#.#.###.#.#.#.#...#.#.#.#...#.....#...#...#...#.........#
#.###.#.#########.###.#.#.#.#.#.###.#.###.#.#.#.#.#.#########.#.#.#.#######.#######.#.#.###.#.#.#.#####.#.#.###.#.###.#.#.#.###############.#
#.....#.........#.....#...#...#...#...#...#.#.#.#.#.....#.....#.#.#.#.....#.......#.#.#...#.#.#.#.#...#.#.#.#...#.#...#.#...#.....#.........#
###############.#################.#####.###.#.#.#.#####.#.#####.#.#.#.###.#######.#.#.###.#.#.#.#.#.#.#.#.#.#.###.#.###.#####.###.#.#########
###...###.......#...............#.....#...#.#.#.#...#...#...#...#.#.#.#...###...#.#.#.#...#.#.#.#.#.#.#.#...#.....#.....#...#.#...#.........#
###.#.###.#######.#############.#####.###.#.#.#.###.#.#####.#.###.#.#.#.#####.#.#.#.#.#.###.#.#.#.#.#.#.#################.#.#.#.###########.#
#...#.....#.......#...#.......#.....#.#...#...#.#...#...#...#...#.#.#.#...#...#.#.#.#.#...#.#...#.#.#.#.#.................#...#...#...#...#.#
#.#########.#######.#.#.#####.#####.#.#.#######.#.#####.#.#####.#.#.#.###.#.###.#.#.#.###.#.#####.#.#.#.#.#######################.#.#.#.#.#.#
#...#...#...###.....#.#.....#.#.....#.#.....#...#.#...#.#...#...#.#...###.#...#.#.#.#.#...#.....#.#.#.#.#.........#.............#...#.#.#.#.#
###.#.#.#.#####.#####.#####.#.#.#####.#####.#.###.#.#.#.###.#.###.#######.###.#.#.#.#.#.#######.#.#.#.#.#########.#.###########.#####.#.#.#.#
#...#.#...#.....#...#.......#...#...#...#...#...#...#.#...#.#.#...#.....#.#...#.#.#...#.....#...#.#.#...#.......#...#...........#...#...#.#.#
#.###.#####.#####.#.#############.#.###.#.#####.#####.###.#.#.#.###.###.#.#.###.#.#########.#.###.#.#####.#####.#####.###########.#.#####.#.#
#.....#...#.......#.............#.#...#...#...#.#.....#...#.#.#...#...#...#.#...#.#.........#.###.#.#...#.....#.#...#...#.........#.....#.#.#
#######.#.#####################.#.###.#####.#.#.#.#####.###.#.###.###.#####.#.###.#.#########.###.#.#.#.#####.#.#.#.###.#.#############.#.#.#
###...#.#.#...#...#...........#...#...###...#...#.....#...#.#...#.###.#.....#...#.#.#...#...#...#.#.#.#.......#...#.#...#...#.....#.....#.#.#
###.#.#.#.#.#.#.#.#.#########.#####.#####.###########.###.#.###.#.###.#.#######.#.#.#.#.#.#.###.#.#.#.#############.#.#####.#.###.#.#####.#.#
#...#...#...#.#.#.#...#.....#.#...#.....#.......#...#...#...#...#.#...#.....###...#.#.#.#.#.#...#...#.......#...###...###...#...#...#...#...#
#.###########.#.#.###.#.###.#.#.#.#####.#######.#.#.###.#####.###.#.#######.#######.#.#.#.#.#.#############.#.#.#########.#####.#####.#.#####
#...........#...#...#...###.#...#.#...#.......#.#.#...#...###.....#...#...#.......#.#.#...#.#.#.....#.......#.#.........#.#.....#...#.#.....#
###########.#######.#######.#####.#.#.#######.#.#.###.###.###########.#.#.#######.#.#.#####.#.#.###.#.#######.#########.#.#.#####.#.#.#####.#
#...###...#.....#...#...#...#...#...#.........#.#.###...#.....#.......#.#.....#...#.#.#...#...#.#...#.........#.....#...#.#.#...#.#.#.#.....#
#.#.###.#.#####.#.###.#.#.###.#.###############.#.#####.#####.#.#######.#####.#.###.#.#.#.#####.#.#############.###.#.###.#.#.#.#.#.#.#.#####
#.#.#...#.......#...#.#.#.....#...............#.#.....#.#...#.#.#.....#.#.....#...#...#.#.#.....#.###...#...#...###.#...#.#...#...#...#.....#
#.#.#.#############.#.#.#####################.#.#####.#.#.#.#.#.#.###.#.#.#######.#####.#.#.#####.###.#.#.#.#.#####.###.#.#################.#
#.#.#.............#.#.#.#...#...###...........#.......#.#.#.#.#.#.#...#.#...#...#...#...#.#.....#.....#...#...#...#...#...#.................#
#.#.#############.#.#.#.#.#.#.#.###.###################.#.#.#.#.#.#.###.###.#.#.###.#.###.#####.###############.#.###.#####.#################
#.#...#...#.......#...#...#.#.#...#.......#...#.......#.#.#.#.#.#.#...#...#...#.....#...#.#...#.....#.....#.....#...#.#...#.#...............#
#.###.#.#.#.###############.#.###.#######.#.#.#.#####.#.#.#.#.#.#.###.###.#############.#.#.#.#####.#.###.#.#######.#.#.#.#.#.#############.#
#...#.#.#...#...#.........#.#...#.........#.#...#.....#.#.#.#.#.#...#...#.#.............#...#.......#.###...#.......#.#.#.#...#...#...#.....#
###.#.#.#####.#.#.#######.#.###.###########.#####.#####.#.#.#.#.###.###.#.#.#########################.#######.#######.#.#.#####.#.#.#.#.#####
###.#...#...#.#.#.#.......#.#...#...........#.....#.....#.#...#.#...#...#.#...#...#...#...#...#...#...#.......#...###...#...#...#.#.#.#.....#
###.#####.#.#.#.#.#.#######.#.###.###########.#####.#####.#####.#.###.###.###.#.#.#.#.#.#.#.#.#.#.#.###.#######.#.#########.#.###.#.#.#####.#
#...#...#.#...#...#.......#...#...#...#.....#...###.......###...#...#...#.#...#.#.#.#...#.#.#.#.#.#.###.......#.#.....#####...###.#.#.......#
#.###.#.#.###############.#####.###.#.#.###.###.#############.#####.###.#.#.###.#.#.#####.#.#.#.#.#.#########.#.#####.###########.#.#########
#...#.#...###...#...#...#...#...#...#...#...#...#...#...#...#...#...###...#.....#.#.#.....#.#...#...#.......#...#...#...#.......#...#.......#
###.#.#######.#.#.#.#.#.###.#.###.#######.###.###.#.#.#.#.#.###.#.###############.#.#.#####.#########.#####.#####.#.###.#.#####.#####.#####.#
###...#...#...#...#...#.....#...#.......#...#.....#...#...#...#.#...#.....###...#.#.#...#...#.........#...#.......#.....#.#.....#...#...#...#
#######.#.#.###################.#######.###.#################.#.###.#.###.###.#.#.#.###.#.###.#########.#.###############.#.#####.#.###.#.###
#.......#...#.......#...#.......#.......#...#.....#.......#...#.....#.#...#...#...#.#...#...#...........#.......#...#...#.#.......#.....#...#
#.###########.#####.#.#.#.#######.#######.###.###.#.#####.#.#########.#.###.#######.#.#####.###################.#.#.#.#.#.#################.#
#.....#.......#...#...#...###...#.......#.....###.#.....#...#.....#...#...#...#.....#.......#...................#.#.#.#.#.#.....#...#.....#.#
#####.#.#######.#.###########.#.#######.#########.#####.#####.###.#.#####.###.#.#############.###################.#.#.#.#.#.###.#.#.#.###.#.#
###...#...#.....#.......#...#.#.......#.........#.#.....#...#...#.#.....#...#.#.#.............#...............#...#...#...#...#...#.#...#.#.#
###.#####.#.###########.#.#.#.#######.#########.#.#.#####.#.###.#.#####.###.#.#.#.#############.#############.#.#############.#####.###.#.#.#
#...#.....#.....#.....#...#...#.....#...........#...#...#.#.###.#.#...#.#...#...#...#.....#.....#.............#.#...#...#...#.....#.....#.#.#
#.###.#########.#.###.#########.###.#################.#.#.#.###.#.#.#.#.#.#########.#.###.#.#####.#############.#.#.#.#.#.#.#####.#######.#.#
#.....#...#...#.#...#...#.......###...................#...#.#...#.#.#.#.#.#...#...#.#.#...#.#...#...#...........#.#...#...#.#...#.....###...#
#######.#.#.#.#.###.###.#.#################################.#.###.#.#.#.#.#.#.#.#.#.#.#.###.#.#.###.#.###########.#########.#.#.#####.#######
#.......#...#.#.#...###...#.............#...#...#.....#.....#...#.#.#.#.#.#.#...#.#...#.....#.#.....#.#.....#...#.........#...#...#...#.....#
#.###########.#.#.#########.###########.#.#.#.#.#.###.#.#######.#.#.#.#.#.#.#####.###########.#######.#.###.#.#.#########.#######.#.###.###.#
#.........#...#...#...#.....#...#.....#.#.#.#.#.#...#.#...#...#.#.#.#...#...#.....###S#######.#...#...#...#...#...#.....#.......#.#...#.#...#
#########.#.#######.#.#.#####.#.#.###.#.#.#.#.#.###.#.###.#.#.#.#.#.#########.#######.#######.#.#.#.#####.#######.#.###.#######.#.###.#.#.###
#.........#.......#.#.#.....#.#...#...#...#...#...#.#.#...#.#.#.#.#.#...#...#...#.....#####...#.#.#...###.......#.#.#...#.......#...#...#...#
#.###############.#.#.#####.#.#####.#############.#.#.#.###.#.#.#.#.#.#.#.#.###.#.#########.###.#.###.#########.#.#.#.###.#########.#######.#
#...............#.#.#.#...#.#...#...#...#...#...#...#...#...#...#.#.#.#...#.....#.....#####.....#.....#.....#...#.#.#.....#.......#.........#
###############.#.#.#.#.#.#.###.#.###.#.#.#.#.#.#########.#######.#.#.###############.#################.###.#.###.#.#######.#####.###########
#.......#.......#...#...#.#.....#.....#...#.#.#.#.......#.......#.#.#.....#...#...###...###############...#...###...###...#...#...#...#.....#
#.#####.#.###############.#################.#.#.#.#####.#######.#.#.#####.#.#.#.#.#####.#################.#############.#.###.#.###.#.#.###.#
#.....#.#...............#.###...###...#...#...#.#.#...#...###...#.#.#.....#.#.#.#.#...#...###############.....#.........#.....#.....#...#...#
#####.#.###############.#.###.#.###.#.#.#.#####.#.#.#.###.###.###.#.#.#####.#.#.#.#.#.###.###################.#.#########################.###
#.....#.###...#...###...#.....#.....#...#.......#...#...#...#...#.#.#.#...#.#.#.#...#.###.#############E....#...#...#.....#.....#...#...#...#
#.#####.###.#.#.#.###.#################################.###.###.#.#.#.#.#.#.#.#.#####.###.#################.#####.#.#.###.#.###.#.#.#.#.###.#
#.#...#.....#...#.....#...#.........#.....#.....###...#...#.#...#...#...#.#.#.#.....#.....###########.....#.......#...###...###.#.#...#.....#
#.#.#.#################.#.#.#######.#.###.#.###.###.#.###.#.#.###########.#.#.#####.#################.###.#####################.#.###########
#...#.#...........#...#.#.#.###...#...#...#.#...#...#.#...#...#.......#...#.#.....#.#...........#.....###...#.....#.....###...#...#...#.....#
#####.#.#########.#.#.#.#.#.###.#.#####.###.#.###.###.#.#######.#####.#.###.#####.#.#.#########.#.#########.#.###.#.###.###.#.#####.#.#.###.#
#.....#.#.........#.#.#.#.#.#...#.#...#...#.#.#...#...#.......#.#...#...#...#...#.#.#.#...#.....#...#.......#.#...#.#...#...#...#...#...#...#
#.#####.#.#########.#.#.#.#.#.###.#.#.###.#.#.#.###.#########.#.#.#.#####.###.#.#.#.#.#.#.#.#######.#.#######.#.###.#.###.#####.#.#######.###
#.....#.#.....#.....#...#...#...#...#.....#.#.#...#.#.....#...#...#...#...#...#...#...#.#.#.........#.........#.....#...#.#.....#.#...#...###
#####.#.#####.#.###############.###########.#.###.#.#.###.#.#########.#.###.###########.#.#############################.#.#.#####.#.#.#.#####
#...#...#.....#.#.......###...#.........###.#.###.#.#...#.#...#.......#...#.....#...#...#...#...#.............#...#...#...#.#.....#.#...#...#
#.#.#####.#####.#.#####.###.#.#########.###.#.###.#.###.#.###.#.#########.#####.#.#.#.#####.#.#.#.###########.#.#.#.#.#####.#.#####.#####.#.#
#.#.......#...#.#.#...#.....#.....#.....#...#...#.#.#...#.#...#.#.....#...#.....#.#.#.....#.#.#.#.....#.....#.#.#...#.....#...#...#.......#.#
#.#########.#.#.#.#.#.###########.#.#####.#####.#.#.#.###.#.###.#.###.#.###.#####.#.#####.#.#.#.#####.#.###.#.#.#########.#####.#.#########.#
#.#.......#.#.#.#.#.#...#.......#...#...#.....#.#.#.#.#...#...#.#.#...#...#.#...#.#.#...#.#.#.#.#...#...#...#.#.........#.#...#.#.#...#...#.#
#.#.#####.#.#.#.#.#.###.#.#####.#####.#.#####.#.#.#.#.#.#####.#.#.#.#####.#.#.#.#.#.#.#.#.#.#.#.#.#.#####.###.#########.#.#.#.#.#.#.#.#.#.#.#
#...#.....#.#.#.#.#...#...#.....#...#.#...#...#.#.#.#.#.....#.#.#.#.....#.#...#.#.#.#.#.#.#.#.#.#.#...#...###...#...#...#.#.#.#.#.#.#...#...#
#####.#####.#.#.#.###.#####.#####.#.#.###.#.###.#.#.#.#####.#.#.#.#####.#.#####.#.#.#.#.#.#.#.#.#.###.#.#######.#.#.#.###.#.#.#.#.#.#########
#.....#.....#.#.#...#.#.....#...#.#.#.#...#.###.#.#.#.....#.#.#.#...#...#.....#.#.#.#.#.#.#...#.#.#...#.......#.#.#.#.#...#.#.#.#.#.......###
#.#####.#####.#.###.#.#.#####.#.#.#.#.#.###.###.#.#.#####.#.#.#.###.#.#######.#.#.#.#.#.#.#####.#.#.#########.#.#.#.#.#.###.#.#.#.#######.###
#.#...#.#.....#...#...#.....#.#...#...#...#...#.#.#...#...#.#.#.....#...#.....#.#.#...#.#.#.....#.#.#...#.....#.#.#.#.#.#...#...#.......#...#
#.#.#.#.#.#######.#########.#.###########.###.#.#.###.#.###.#.#########.#.#####.#.#####.#.#.#####.#.#.#.#.#####.#.#.#.#.#.#############.###.#
#.#.#.#.#...#...#.#.........#...#.......#.#...#.#...#.#...#.#.###.......#.....#.#.....#.#.#.#...#.#...#.#.....#...#.#.#.#.###.........#...#.#
#.#.#.#.###.#.#.#.#.###########.#.#####.#.#.###.###.#.###.#.#.###.###########.#.#####.#.#.#.#.#.#.#####.#####.#####.#.#.#.###.#######.###.#.#
#.#.#.#.#...#.#...#...#.....#...#.#...#...#...#.#...#.#...#.#.#...#.......#...#...#...#.#.#...#.#...#...#...#...###...#.#.....#.....#...#.#.#
#.#.#.#.#.###.#######.#.###.#.###.#.#.#######.#.#.###.#.###.#.#.###.#####.#.#####.#.###.#.#####.###.#.###.#.###.#######.#######.###.###.#.#.#
#.#.#.#.#...#.###...#.#.#...#.###...#...#.....#...#...#...#...#...#.....#.#.#...#.#.#...#.#.....#...#...#.#.....#.....#.#.......###.....#.#.#
#.#.#.#.###.#.###.#.#.#.#.###.#########.#.#########.#####.#######.#####.#.#.#.#.#.#.#.###.#.#####.#####.#.#######.###.#.#.###############.#.#
#...#.#.#...#.#...#...#.#...#...###.....#.........#...#...#.......#.....#.#...#.#...#...#.#.#...#.....#.#.........#...#.#.........###...#...#
#####.#.#.###.#.#######.###.###.###.#############.###.#.###.#######.#####.#####.#######.#.#.#.#.#####.#.###########.###.#########.###.#.#####
#.....#.#...#.#...#...#.#...#...#...#.....#...#...###...###.....#...###...#...#.......#...#...#...#...#.#...#...#...#...#...#...#.....#.....#
#.#####.###.#.###.#.#.#.#.###.###.###.###.#.#.#.###############.#.#####.###.#.#######.###########.#.###.#.#.#.#.#.###.###.#.#.#.###########.#
#.......###...###.#.#.#.#.....#...#...#...#.#...###.............#.....#...#.#.#...#...#...........#.###...#.#.#.#.###.....#...#.....#.......#
#################.#.#.#.#######.###.###.###.#######.#################.###.#.#.#.#.#.###.###########.#######.#.#.#.#################.#.#######
###...............#.#.#.#.......#...###...#.......#.......#.....#.....###.#.#.#.#...###.....#.....#.......#.#.#.#.......#...#...#...#.......#
###.###############.#.#.#.#######.#######.#######.#######.#.###.#.#######.#.#.#.###########.#.###.#######.#.#.#.#######.#.#.#.#.#.#########.#
#...#...#...#...#...#.#.#.....#...#...###.#.......#.......#.#...#.......#...#.#...........#...###.#...#...#.#.#.#.....#...#...#.#.#...#...#.#
#.###.#.#.#.#.#.#.###.#.#####.#.###.#.###.#.#######.#######.#.#########.#####.###########.#######.#.#.#.###.#.#.#.###.#########.#.#.#.#.#.#.#
#.....#.#.#...#...###.#.#.....#.....#.#...#.....###.#.....#.#...#...#...#.....#...#.....#.###.....#.#...#...#.#.#...#.#...#...#.#.#.#.#.#.#.#
#######.#.###########.#.#.###########.#.#######.###.#.###.#.###.#.#.#.###.#####.#.#.###.#.###.#####.#####.###.#.###.#.#.#.#.#.#.#.#.#.#.#.#.#
###.....#.#...........#.#...#...#...#.#.#.....#...#.#.###.#.#...#.#...###...#...#.#.###...#...#...#...###.....#.#...#.#.#...#...#...#...#.#.#
###.#####.#.###########.###.#.#.#.#.#.#.#.###.###.#.#.###.#.#.###.#########.#.###.#.#######.###.#.###.#########.#.###.#.#################.#.#
#...#.....#...#.......#...#...#.#.#...#.#...#.#...#.#.#...#.#...#.........#.#...#.#.......#...#.#...#.........#...###.#.#...#...........#...#
#.###.#######.#.#####.###.#####.#.#####.###.#.#.###.#.#.###.###.#########.#.###.#.#######.###.#.###.#########.#######.#.#.#.#.#########.#####
#...#.#.......#.....#...#.#.....#.#.....#...#.#.###.#.#...#.###.#...#...#.#.#...#...#.....###.#.#...#...#...#.......#.#...#...#...#...#.....#
###.#.#.###########.###.#.#.#####.#.#####.###.#.###.#.###.#.###.#.#.#.#.#.#.#.#####.#.#######.#.#.###.#.#.#.#######.#.#########.#.#.#.#####.#
###.#.#.#.....#...#.###...#...#...#.#...#...#.#...#...###...#...#.#.#.#.#.#.#.#...#.#.......#...#...#.#...#...#.....#...#...#...#...#.#.....#
###.#.#.#.###.#.#.#.#########.#.###.#.#.###.#.###.###########.###.#.#.#.#.#.#.#.#.#.#######.#######.#.#######.#.#######.#.#.#.#######.#.#####
#...#.#.#.#...#.#.#.#.........#.#...#.#...#.#...#.....#.......#...#.#.#.#.#.#.#.#...#...#...#.......#.......#.#.......#.#.#.#.....#...#.....#
#.###.#.#.#.###.#.#.#.#########.#.###.###.#.###.#####.#.#######.###.#.#.#.#.#.#.#####.#.#.###.#############.#.#######.#.#.#.#####.#.#######.#
#.....#...#.....#...#...........#.....###...###.......#.........###...#...#...#.......#...###...............#.........#...#.......#.........#
#############################################################################################################################################
"""
}
